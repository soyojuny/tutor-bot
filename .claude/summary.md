# Tutor Bot í”„ë¡œì íŠ¸ ìš”ì•½

## í”„ë¡œì íŠ¸ ê°œìš”
ë‘ ì•„ì´(10ì„¸, 7ì„¸)ë¥¼ ìœ„í•œ í•™ìŠµ ê´€ë¦¬ ì›¹ì•± (PWA)

### ê¸°ìˆ  ìŠ¤íƒ
- **í”„ë ˆì„ì›Œí¬**: Next.js 15 (App Router)
- **ì–¸ì–´**: TypeScript
- **ìŠ¤íƒ€ì¼ë§**: Tailwind CSS
- **ë°ì´í„°ë² ì´ìŠ¤**: Supabase
- **ìƒíƒœ ê´€ë¦¬**: Zustand
- **PWA**: @ducanh2912/next-pwa

### í•µì‹¬ ê¸°ëŠ¥
1. í•™ìŠµ í™œë™ ì¶”ì  (ìˆ™ì œ, ë…ì„œ, ë¬¸ì œ í’€ì´ ë“±)
2. í¬ì¸íŠ¸/ë³´ìƒ ì‹œìŠ¤í…œ (ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜)
3. ì§„í–‰ ìƒí™© ëŒ€ì‹œë³´ë“œ (ì•„ì´ & ë¶€ëª¨)
4. ë¶€ëª¨ ê´€ë¦¬ ê¸°ëŠ¥ (ê³¼ì œ ìƒì„±, ê²€ì¦, ë³´ìƒ ì„¤ì •)
5. ê°„ë‹¨í•œ ë¡œì»¬ ì¸ì¦ (í”„ë¡œí•„ ì„ íƒ + 4ìë¦¬ PIN)

---

## í˜„ì¬ êµ¬í˜„ ìƒíƒœ (2026-01-10)

### âœ… ì™„ë£Œëœ Phase

#### Phase 1: í”„ë¡œì íŠ¸ ì´ˆê¸°í™”
- Next.js í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±
- ì˜ì¡´ì„± ì„¤ì¹˜ ì™„ë£Œ
- TypeScript, Tailwind, PWA ì„¤ì •
- í´ë” êµ¬ì¡° ìƒì„±

#### Phase 2: Supabase ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
- SQL ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìƒì„± (6ê°œ í…Œì´ë¸”)
  - profiles, activities, rewards, points_ledger, reward_redemptions, daily_streaks
- ìƒ˜í”Œ ë°ì´í„° SQL
- TypeScript íƒ€ì… ì •ì˜
- Supabase ì„¤ì • ê°€ì´ë“œ (`supabase/SETUP_GUIDE.md`)

#### Phase 3: í•µì‹¬ ì¸í”„ë¼ êµ¬ì¶•
- Supabase í´ë¼ì´ì–¸íŠ¸ (client-side & server-side)
- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ (cn, points, dates)
- ìƒìˆ˜ íŒŒì¼ (activities, rewards)
- íƒ€ì… ì •ì˜ ì™„ë£Œ

#### Phase 4: ì¸ì¦ ì‹œìŠ¤í…œ
- Zustand ì¸ì¦ ìŠ¤í† ì–´ (`store/authStore.ts`)
- useAuth ì»¤ìŠ¤í…€ í›…
- ProfileSelector ë¡œê·¸ì¸ UI
- ProtectedRoute ì»´í¬ë„ŒíŠ¸
- ì„ì‹œ ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ (ë¶€ëª¨/ì•„ì´)

### ğŸš§ ì§„í–‰ ì˜ˆì • Phase

- **Phase 5**: ê³µìœ  ì»´í¬ë„ŒíŠ¸ êµ¬ì¶•
- **Phase 6**: í™œë™ ê´€ë¦¬ ì‹œìŠ¤í…œ (ë¶€ëª¨)
- **Phase 7**: í™œë™ ì™„ë£Œ ì‹œìŠ¤í…œ (ì•„ì´)
- **Phase 8**: í¬ì¸íŠ¸ ì‹œìŠ¤í…œ
- **Phase 9**: ë³´ìƒ ì‹œìŠ¤í…œ
- **Phase 10**: ëŒ€ì‹œë³´ë“œ
- **Phase 11**: PWA ì„¤ì •
- **Phase 12**: ì¶”ê°€ ê¸°ëŠ¥ ë° ê°œì„ 

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
tutor-bot/
â”œâ”€â”€ app/                           # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/login/             # ë¡œê·¸ì¸ í˜ì´ì§€ âœ…
â”‚   â”œâ”€â”€ (child)/                  # ì•„ì´ìš© ì¸í„°í˜ì´ìŠ¤ (ì„ì‹œ) âœ…
â”‚   â”‚   â”œâ”€â”€ layout.tsx            # ProtectedRoute ì ìš©
â”‚   â”‚   â””â”€â”€ dashboard/page.tsx    # ì„ì‹œ ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ (parent)/                 # ë¶€ëª¨ìš© ì¸í„°í˜ì´ìŠ¤ (ì„ì‹œ) âœ…
â”‚   â”‚   â”œâ”€â”€ layout.tsx            # ProtectedRoute ì ìš©
â”‚   â”‚   â””â”€â”€ dashboard/page.tsx    # ì„ì‹œ ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ api/                      # API ë¼ìš°íŠ¸ (ì˜ˆì •)
â”‚   â”œâ”€â”€ layout.tsx                # Root layout âœ…
â”‚   â”œâ”€â”€ page.tsx                  # ë©”ì¸ í˜ì´ì§€ (ë¡œê·¸ì¸ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸) âœ…
â”‚   â”œâ”€â”€ globals.css               # Tailwind CSS âœ…
â”‚   â””â”€â”€ manifest.ts               # PWA manifest âœ…
â”‚
â”œâ”€â”€ components/                   # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ auth/                     # ì¸ì¦ ê´€ë ¨ âœ…
â”‚   â”‚   â”œâ”€â”€ ProfileSelector.tsx   # ë¡œê·¸ì¸ UI
â”‚   â”‚   â””â”€â”€ ProtectedRoute.tsx    # ë¼ìš°íŠ¸ ë³´í˜¸
â”‚   â”œâ”€â”€ child/                    # ì•„ì´ìš© ì»´í¬ë„ŒíŠ¸ (ì˜ˆì •)
â”‚   â”œâ”€â”€ parent/                   # ë¶€ëª¨ìš© ì»´í¬ë„ŒíŠ¸ (ì˜ˆì •)
â”‚   â”œâ”€â”€ shared/                   # ê³µìœ  ì»´í¬ë„ŒíŠ¸ (ì˜ˆì •)
â”‚   â””â”€â”€ dashboard/                # ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸ (ì˜ˆì •)
â”‚
â”œâ”€â”€ lib/                          # ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ supabase/                 # Supabase í´ë¼ì´ì–¸íŠ¸ âœ…
â”‚   â”‚   â”œâ”€â”€ client.ts             # Browser client
â”‚   â”‚   â””â”€â”€ server.ts             # Server client
â”‚   â”œâ”€â”€ utils/                    # í—¬í¼ í•¨ìˆ˜ âœ…
â”‚   â”‚   â”œâ”€â”€ cn.ts                 # classNames ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ points.ts             # í¬ì¸íŠ¸ ê³„ì‚°
â”‚   â”‚   â””â”€â”€ dates.ts              # ë‚ ì§œ í¬ë§·íŒ…
â”‚   â””â”€â”€ constants/                # ìƒìˆ˜ âœ…
â”‚       â”œâ”€â”€ activities.ts         # í™œë™ ì¹´í…Œê³ ë¦¬ ë“±
â”‚       â””â”€â”€ rewards.ts            # ë³´ìƒ ì¹´í…Œê³ ë¦¬ ë“±
â”‚
â”œâ”€â”€ store/                        # Zustand ìŠ¤í† ì–´
â”‚   â””â”€â”€ authStore.ts              # ì¸ì¦ ìƒíƒœ ê´€ë¦¬ âœ…
â”‚
â”œâ”€â”€ types/                        # TypeScript íƒ€ì… âœ…
â”‚   â”œâ”€â”€ database.types.ts         # Supabase íƒ€ì…
â”‚   â”œâ”€â”€ auth.types.ts             # ì¸ì¦ íƒ€ì…
â”‚   â”œâ”€â”€ activity.types.ts         # í™œë™ íƒ€ì…
â”‚   â”œâ”€â”€ points.types.ts           # í¬ì¸íŠ¸ íƒ€ì…
â”‚   â”œâ”€â”€ reward.types.ts           # ë³´ìƒ íƒ€ì…
â”‚   â””â”€â”€ index.ts                  # íƒ€ì… re-export
â”‚
â”œâ”€â”€ hooks/                        # Custom React Hooks
â”‚   â””â”€â”€ useAuth.ts                # ì¸ì¦ í›… âœ…
â”‚
â”œâ”€â”€ supabase/                     # Supabase ê´€ë ¨
â”‚   â”œâ”€â”€ migrations/               # SQL ë§ˆì´ê·¸ë ˆì´ì…˜ âœ…
â”‚   â”‚   â”œâ”€â”€ 001_create_tables.sql
â”‚   â”‚   â””â”€â”€ 002_seed_data.sql
â”‚   â””â”€â”€ SETUP_GUIDE.md            # ì„¤ì • ê°€ì´ë“œ âœ…
â”‚
â”œâ”€â”€ public/                       # ì •ì  íŒŒì¼
â”‚   â””â”€â”€ icons/                    # PWA ì•„ì´ì½˜ (ì˜ˆì •)
â”‚
â”œâ”€â”€ .env.local.example            # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿ âœ…
â”œâ”€â”€ next.config.js                # Next.js + PWA ì„¤ì • âœ…
â”œâ”€â”€ tailwind.config.ts            # Tailwind ì„¤ì • âœ…
â””â”€â”€ tsconfig.json                 # TypeScript ì„¤ì • âœ…
```

---

## ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### profiles
- ì‚¬ìš©ì í”„ë¡œí•„ (ë¶€ëª¨ 1ëª…, ì•„ì´ 2ëª…)
- role: 'parent' | 'child'
- PIN ì½”ë“œë¡œ ë¡œê·¸ì¸

### activities
- í•™ìŠµ í™œë™/ê³¼ì œ
- ì¹´í…Œê³ ë¦¬: homework, reading, problem-solving, practice, other
- ìƒíƒœ: pending, in_progress, completed, verified
- ë¶€ëª¨ê°€ ìƒì„±, ì•„ì´ê°€ ì™„ë£Œ, ë¶€ëª¨ê°€ ê²€ì¦

### rewards
- êµí™˜ ê°€ëŠ¥í•œ ë³´ìƒ
- ì¹´í…Œê³ ë¦¬: screen_time, treat, activity, toy, privilege, other
- í¬ì¸íŠ¸ ë¹„ìš©

### points_ledger
- í¬ì¸íŠ¸ ê±°ë˜ ë‚´ì—­
- í™œë™ ì™„ë£Œ ì‹œ ì ë¦½, ë³´ìƒ êµí™˜ ì‹œ ì°¨ê°
- balance_afterë¡œ ì”ì•¡ ì¶”ì 

### reward_redemptions
- ë³´ìƒ êµí™˜ ìš”ì²­
- ìƒíƒœ: pending, approved, fulfilled, rejected
- ë¶€ëª¨ ìŠ¹ì¸ í•„ìš”

### daily_streaks
- ì¼ì¼ ì—°ì† ë‹¬ì„±ì¼ ì¶”ì 
- ë™ê¸° ë¶€ì—¬ìš©

---

## í™˜ê²½ ë³€ìˆ˜

`.env.local` íŒŒì¼ì— ë‹¤ìŒ ì •ë³´ í•„ìš”:

```env
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
SUPABASE_SERVICE_ROLE_KEY=eyJ...
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

---

## í…ŒìŠ¤íŠ¸ ê³„ì • (ìƒ˜í”Œ ë°ì´í„°)

- **ë¶€ëª¨**: PIN 1234
- **í°ì•„ì´** (10ì„¸): PIN 0000
- **ì‘ì€ì•„ì´** (7ì„¸): PIN 1111

---

## ë‹¤ìŒ êµ¬í˜„ ë‹¨ê³„

### Phase 5: ê³µìœ  ì»´í¬ë„ŒíŠ¸ êµ¬ì¶•
- Button ì»´í¬ë„ŒíŠ¸ (ì—¬ëŸ¬ variant)
- Card ì»´í¬ë„ŒíŠ¸
- Modal ì»´í¬ë„ŒíŠ¸
- Header ì»´í¬ë„ŒíŠ¸

### Phase 6: í™œë™ ê´€ë¦¬ ì‹œìŠ¤í…œ (ë¶€ëª¨)
- activityStore (Zustand)
- ActivityForm ì»´í¬ë„ŒíŠ¸
- í™œë™ CRUD API
- í™œë™ ëª©ë¡ í˜ì´ì§€

### Phase 7: í™œë™ ì™„ë£Œ ì‹œìŠ¤í…œ (ì•„ì´)
- ActivityCard ì»´í¬ë„ŒíŠ¸
- í™œë™ ì™„ë£Œ UI
- ê²€ì¦ ëŒ€ê¸° ìƒíƒœ

### ì´í›„ Phase
- í¬ì¸íŠ¸ ì‹œìŠ¤í…œ í†µí•©
- ë³´ìƒ ì‹œìŠ¤í…œ êµ¬í˜„
- ëŒ€ì‹œë³´ë“œ ì™„ì„±
- PWA ìµœì í™”

---

## ê°œë°œ ëª…ë ¹ì–´

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev

# ë¹Œë“œ
npm run build

# í”„ë¡œë•ì…˜ ì„œë²„ ì‹¤í–‰
npm start

# ë¦°íŠ¸
npm run lint
```

---

## ì¤‘ìš” ì°¸ê³ ì‚¬í•­

### ë³´ì•ˆ
- í˜„ì¬ PIN ì½”ë“œëŠ” í‰ë¬¸ ì €ì¥ (í”„ë¡œë•ì…˜ì—ì„œëŠ” bcrypt í•„ìš”!)
- API routesì—ì„œ ê¶Œí•œ ê²€ì¦ í•„ìš”
- RLSëŠ” í™œì„±í™”ë˜ì–´ ìˆì§€ë§Œ ì •ì±… ë¯¸ì„¤ì • (Service Role Key ì‚¬ìš©)

### ì„±ëŠ¥
- Next.js Image ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© ê¶Œì¥
- React.memoë¡œ ë¦¬ë Œë”ë§ ìµœì í™”
- Zustand selector í™œìš©

### UI/UX
- ì•„ì´ìš©: í° ë²„íŠ¼, ë°ì€ ìƒ‰ìƒ, ê°„ë‹¨í•œ í…ìŠ¤íŠ¸
- ë¶€ëª¨ìš©: ë°ì´í„° ì¤‘ì‹¬, ê´€ë¦¬ ê¸°ëŠ¥ ê°•ì¡°
- ë¡œë”© ìƒíƒœ ë° ì—ëŸ¬ ì²˜ë¦¬ í•„ìˆ˜

---

## ë„ì›€ì´ í•„ìš”í•  ë•Œ

1. **Supabase ì„¤ì •**: `supabase/SETUP_GUIDE.md` ì°¸ì¡°
2. **í”„ë¡œì íŠ¸ êµ¬ì¡°**: ì´ íŒŒì¼ì˜ "í”„ë¡œì íŠ¸ êµ¬ì¡°" ì„¹ì…˜ ì°¸ì¡°
3. **êµ¬í˜„ ê³„íš**: `C:\Users\joon\.claude\plans\reflective-tickling-treehouse.md` ì°¸ì¡°
4. **íƒ€ì… ì •ì˜**: `types/` ë””ë ‰í† ë¦¬ ì°¸ì¡°

---

## ìµœê·¼ ì‘ì—… ì´ë ¥

- 2026-01-10: Phase 1-4 ì™„ë£Œ (í”„ë¡œì íŠ¸ ì´ˆê¸°í™”, DB ì„¤ì •, ì¸í”„ë¼, ì¸ì¦)
- ë‹¤ìŒ: Phase 5ë¶€í„° ê³„ì† êµ¬í˜„ ë˜ëŠ” í˜„ì¬ ìƒíƒœ í…ŒìŠ¤íŠ¸

---

## ì•Œë ¤ì§„ ì´ìŠˆ

- [ ] PWA ì•„ì´ì½˜ ì•„ì§ ìƒì„± ì•ˆ ë¨
- [ ] Supabase í”„ë¡œì íŠ¸ê°€ ì‚¬ìš©ì ë¡œì»¬ì— ì„¤ì •ë˜ì–´ì•¼ í•¨
- [ ] PIN ì½”ë“œ í•´ì‹± í•„ìš” (í”„ë¡œë•ì…˜)
- [ ] .env.local íŒŒì¼ ìƒì„± í•„ìš”
